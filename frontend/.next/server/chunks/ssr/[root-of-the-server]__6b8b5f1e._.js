module.exports=[93408,(a,b,c)=>{"use strict";b.exports=a.r(52828).vendored["react-ssr"].React},10720,(a,b,c)=>{"use strict";b.exports=a.r(52828).vendored.contexts.AppRouterContext},89067,(a,b,c)=>{"use strict";b.exports=a.r(52828).vendored.contexts.HooksClientContext},70398,(a,b,c)=>{"use strict";b.exports=a.r(52828).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},52828,(a,b,c)=>{"use strict";b.exports=a.r(18622)},49547,(a,b,c)=>{"use strict";b.exports=a.r(52828).vendored["react-ssr"].ReactJsxRuntime},65563,a=>{"use strict";var b=a.i(49547),c=a.i(93408),d=a.i(18129);let e=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api",f=()=>({"Content-Type":"application/json"}),g=async a=>{if(401===a.status)throw Error("Unauthorized: Please log in again");if(403===a.status)throw Error("Access forbidden: You do not have permission to perform this action");if(422===a.status){let b=await a.json();throw Error(`Validation error: ${b.detail||"Invalid input"}`)}if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||`API error: ${a.status} ${a.statusText}`)},h=async a=>{let b=await fetch(`${e}/${a}/tasks`,{method:"GET",headers:f()});return await g(b),b.json()},i=async(a,b)=>{let c=await fetch(`${e}/${a}/tasks`,{method:"POST",headers:f(),body:JSON.stringify(b)});return await g(c),c.json()},j=async(a,b,c)=>{let d=await fetch(`${e}/${a}/tasks/${b}`,{method:"PUT",headers:f(),body:JSON.stringify(c)});return await g(d),d.json()},k=async(a,b)=>{let c=await fetch(`${e}/${a}/tasks/${b}`,{method:"DELETE",headers:f()});await g(c)},l=async(a,b)=>{let c=await fetch(`${e}/${a}/tasks/${b}/complete`,{method:"PATCH",headers:f()});return await g(c),c.json()},m=({task:a,onUpdate:d,onDelete:e,onToggleCompletion:f})=>{let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(a.title),[k,l]=(0,c.useState)(a.description||""),[m,n]=(0,c.useState)(!1),o=async()=>{n(!0);try{await d(a.id,{title:i,description:k||void 0}),h(!1)}finally{n(!1)}},p=async()=>{n(!0);try{await f(a.id)}finally{n(!1)}},q=async()=>{if(window.confirm(`Are you sure you want to delete "${a.title}"?`)){n(!0);try{await e(a.id)}finally{n(!1)}}};return(0,b.jsxs)("li",{className:"px-4 py-4 sm:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.completed,onChange:p,disabled:m,className:`w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 ${m?"opacity-50":""}`}),g?(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),disabled:m,className:`block w-full px-3 py-2 text-base text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${m?"bg-gray-100":""}`}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),disabled:m,className:`block w-full px-3 py-2 mt-2 text-base text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${m?"bg-gray-100":""}`,rows:2})]}):(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[(0,b.jsx)("p",{className:`text-sm font-medium ${a.completed?"line-through text-gray-500":"text-gray-900"}`,children:a.title}),a.description&&(0,b.jsx)("p",{className:`mt-1 text-sm ${a.completed?"text-gray-400":"text-gray-500"}`,children:a.description})]})]}),(0,b.jsx)("div",{className:"flex space-x-2",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:o,disabled:m,className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Saving...":"Save"}),(0,b.jsx)("button",{onClick:()=>{j(a.title),l(a.description||""),h(!1)},disabled:m,className:`inline-flex items-center px-2.5 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${m?"opacity-50 cursor-not-allowed":""}`,children:"Cancel"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>h(!0),disabled:m,className:`inline-flex items-center px-2.5 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${m?"opacity-50 cursor-not-allowed":""}`,children:"Edit"}),(0,b.jsx)("button",{onClick:q,disabled:m,className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Deleting...":"Delete"})]})})]}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:["Created: ",new Date(a.created_at).toLocaleString()]}),(0,b.jsxs)("span",{className:"ml-2",children:["Updated: ",new Date(a.updated_at).toLocaleString()]})]})]})},n=({tasks:a,onUpdateTask:c,onDeleteTask:d,onToggleCompletion:e})=>0===a.length?(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No tasks"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new task."})]}):(0,b.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,b.jsx)("ul",{className:"divide-y divide-gray-200",children:a.map(a=>(0,b.jsx)(m,{task:a,onUpdate:c,onDelete:d,onToggleCompletion:e},a.id))})}),o=({onCreateTask:a})=>{let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),l=async b=>{if(b.preventDefault(),!d.trim())return void k("Title is required");i(!0),k(null);try{await a(d,f||void 0),e(""),g("")}catch(a){k("Failed to create task. Please try again."),console.error("Error creating task:",a)}finally{i(!1)}};return(0,b.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,b.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Create New Task"}),j&&(0,b.jsx)("div",{className:"p-3 mt-4 text-red-700 bg-red-100 rounded-md",children:j}),(0,b.jsxs)("form",{onSubmit:l,className:"mt-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,b.jsx)("input",{type:"text",id:"title",value:d,onChange:a=>e(a.target.value),disabled:h,className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${h?"bg-gray-100":""}`,placeholder:"What needs to be done?"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (optional)"}),(0,b.jsx)("textarea",{id:"description",value:f,onChange:a=>g(a.target.value),disabled:h,rows:3,className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${h?"bg-gray-100":""}`,placeholder:"Add details..."})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",disabled:h,className:`inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Adding Task...":"Add Task"})})]})]})})};function p(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[m,p]=(0,c.useState)(null),q=(0,d.useRouter)(),r="default_user_id";(0,c.useEffect)(()=>{localStorage.getItem("auth_token")?s():q.push("/auth")},[q]);let s=async()=>{try{g(!0);let a=await h(r);e(a),p(null)}catch(a){console.error("Error fetching tasks:",a),p("Failed to load tasks. Please try again later.")}finally{g(!1)}},t=async(b,c)=>{try{let d=await i(r,{title:b,description:c});e([...a,d])}catch(a){console.error("Error creating task:",a),p("Failed to create task. Please try again.")}},u=async(b,c)=>{try{let d=await j(r,b,c);e(a.map(a=>a.id===b?d:a))}catch(a){console.error("Error updating task:",a),p("Failed to update task. Please try again.")}},v=async b=>{try{await k(r,b),e(a.filter(a=>a.id!==b))}catch(a){console.error("Error deleting task:",a),p("Failed to delete task. Please try again.")}},w=async b=>{try{let c=await l(r,b);e(a.map(a=>a.id===b?c:a))}catch(a){console.error("Error toggling task completion:",a),p("Failed to update task. Please try again.")}};return f?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Loading Dashboard..."}),(0,b.jsx)("p",{className:"text-gray-600",children:"Fetching your tasks"})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow",children:(0,b.jsx)("div",{className:"px-4 py-6 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Tasks"}),(0,b.jsx)("button",{onClick:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user_id"),q.push("/auth")},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Logout"})]})})}),(0,b.jsx)("main",{className:"py-8",children:(0,b.jsxs)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[m&&(0,b.jsx)("div",{className:"p-4 mb-6 text-red-700 bg-red-100 rounded-md",children:m}),(0,b.jsx)(o,{onCreateTask:t}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(n,{tasks:a,onUpdateTask:u,onDeleteTask:v,onToggleCompletion:w})})]})})]})}a.s(["default",()=>p],65563)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6b8b5f1e._.js.map