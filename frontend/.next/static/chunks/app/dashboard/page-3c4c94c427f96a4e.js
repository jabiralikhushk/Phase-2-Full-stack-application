(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6302:function(e,t,s){Promise.resolve().then(s.bind(s,227))},227:function(e,t,s){"use strict";s.r(t);var a=s(7437),o=s(2265),r=s(4033),l=s(2247),d=s(4977),i=s(1844),n=s(9843);t.default=()=>{let[e,t]=(0,o.useState)([]),[s,c]=(0,o.useState)({title:"",description:""}),[m,u]=(0,o.useState)(!0),[h,x]=(0,o.useState)(""),p=(0,r.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){p.push("/login");return}fetchTodos()},[p]);let fetchTodos=async()=>{try{let e=await n.Z.get("/api/todos");t(e.data)}catch(t){var e,s;x((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch todos")}finally{u(!1)}},handleInputChange=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s}))},handleAddTodo=async a=>{if(a.preventDefault(),s.title.trim())try{let a=await n.Z.post("/api/todos",s);t([a.data,...e]),c({title:"",description:""})}catch(e){var o,r;x((null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)||"Failed to add todo")}},toggleTodo=async s=>{try{let a=e.find(e=>e._id===s);if(!a)return;let o=await n.Z.put("/api/todos/"+s,{completed:!a.completed});t(e.map(e=>e._id===s?o.data:e))}catch(e){var a,o;x((null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Failed to update todo")}},deleteTodo=async s=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await n.Z.delete("/api/todos/"+s),t(e.filter(e=>e._id!==s))}catch(e){var a,o;x((null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Failed to delete todo")}};return m?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Bonsai App"}),(0,a.jsx)(l.Z,{variant:"secondary",onClick:()=>{localStorage.removeItem("token"),p.push("/login")},children:"Logout"})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[h&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}),(0,a.jsxs)(i.Z,{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Todo"}),(0,a.jsxs)("form",{onSubmit:handleAddTodo,className:"space-y-4",children:[(0,a.jsx)(d.Z,{label:"Title",id:"title",name:"title",type:"text",placeholder:"What needs to be done?",value:s.title,onChange:handleInputChange,required:!0}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",placeholder:"Add details...",value:s.description,onChange:handleInputChange,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)(l.Z,{type:"submit",variant:"primary",children:"Add Todo"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Your Todos (",e.length,")"]}),0===e.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No todos yet. Add one above!"}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,a.jsx)(i.Z,{className:e.completed?"bg-green-50":"",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium "+(e.completed?"line-through text-gray-500":"text-gray-900"),children:e.title}),e.description&&(0,a.jsx)("p",{className:"mt-1 text-sm "+(e.completed?"line-through text-gray-500":"text-gray-600"),children:e.description}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(l.Z,{variant:e.completed?"secondary":"primary",onClick:()=>toggleTodo(e._id),className:"text-xs",children:e.completed?"Undo":"Complete"}),(0,a.jsx)(l.Z,{variant:"danger",onClick:()=>deleteTodo(e._id),className:"text-xs",children:"Delete"})]})]})},e._id))})]})]})]})}},2247:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{children:t,onClick:s,type:o="button",variant:r="primary",className:l="",disabled:d=!1}=e;return(0,a.jsx)("button",{type:o,className:"px-4 py-2 rounded-md font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 "+({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"})[r]+" "+l+" "+(d?"opacity-50 cursor-not-allowed":""),onClick:s,disabled:d,children:t})}},1844:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 "+s,children:t})}},4977:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{label:t,id:s,name:o,type:r="text",placeholder:l,value:d,onChange:i,required:n=!1,error:c,className:m=""}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[t&&(0,a.jsx)("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,a.jsx)("input",{id:s,name:o,type:r,placeholder:l,value:d,onChange:i,required:n,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(c?"border-red-500":"border-gray-300"," ").concat(m)}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c})]})}},9843:function(e,t,s){"use strict";var a=s(4829);let o=a.Z.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}),t.Z=o}},function(e){e.O(0,[600,971,472,744],function(){return e(e.s=6302)}),_N_E=e.O()}]);