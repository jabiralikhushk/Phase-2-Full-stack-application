const fs = require('fs');  
const content = "const jwt = require('jsonwebtoken');\\nconst User = require('../models/User');\\n\\nconst protect = async (req, res, next) => {\\n  let token;\\n\\n  if (req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {\\n    try {\\n      // Get token from header\\n      token = req.headers.authorization.split(' ')[1];\\n\\n      // Verify token\\n      const decoded = jwt.verify(token, process.env.JWT_SECRET);\\n\\n      // Get user from the token\\n      req.user = await User.findById(decoded.id).select('-password');\\n\\n      next();\\n    } catch (error) {\\n      console.error(error);\\n      return res.status(401).json({ message: 'Not authorized, token failed' });\\n    }\\n  }\\n\\n  if (!token) {\\n    return res.status(401).json({ message: 'Not authorized, no token' });\\n  }\\n};\\n\\nmodule.exports = { protect };"  
fs.writeFileSync('backend/middleware/auth.js', content) 
