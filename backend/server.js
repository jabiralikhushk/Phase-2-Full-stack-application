const express = require('express');\nconst cors = require('cors');\nconst connectDB = require('./config/database');\nconst { errorHandler } = require('./middleware/errorHandler');\nconst path = require('path');\n\n// Load environment variables\nrequire('dotenv').config();\n\n// Connect to database\nconnectDB();\n\nconst app = express();\n\n// Middleware\napp.use(express.json({ extended: false }));\napp.use(cors());\n\n// Routes\napp.use('/api/auth', require('./routes/auth'));\napp.use('/api/todos', require('./routes/todos'));\n\n// Serve frontend in production\nif (process.env.NODE_ENV === 'production') {\n  app.use(express.static(path.join(__dirname, '../frontend/out')));\n\n  app.get('*', (req, res) => {\n    res.sendFile(path.join(__dirname, '../frontend/out/index.html'));\n  });\n} else {\n  app.get('/', (req, res) => res.json({ message: 'API Running...' }));\n}\n\n// Error handler\napp.use(errorHandler);\n\nconst PORT = process.env.PORT || 5000;\n\napp.listen(PORT, () => console.log('Server started on port ' + PORT));